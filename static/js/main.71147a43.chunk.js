(this["webpackJsonpbare-bones-webgl"]=this["webpackJsonpbare-bones-webgl"]||[]).push([[0],{28:function(t,e,r){},29:function(t,e,r){},39:function(t,e,r){"use strict";r.r(e);var n={};r.r(n),r.d(n,"icosahedron",(function(){return f})),r.d(n,"Cone",(function(){return m})),r.d(n,"Cylinder",(function(){return d})),r.d(n,"Extrude",(function(){return g})),r.d(n,"Lathe",(function(){return v})),r.d(n,"RegularPolygon",(function(){return p})),r.d(n,"Sphere",(function(){return y})),r.d(n,"Torus",(function(){return b})),r.d(n,"Tube",(function(){return x}));var a={};r.r(a),r.d(a,"MatrixAnimation",(function(){return Q})),r.d(a,"RotateAboutPoint",(function(){return Z}));var i=r(0),o=r.n(i),s=r(19),c=r.n(s),h=(r(28),r(14)),l=r(3),u=(r(29),r(2)),f=function t(){var e=.5257311121191336,r=.8506508083520399;return{type:t,params:{},vertices:[[-e,0,r],[e,0,r],[-e,0,-r],[e,0,-r],[0,r,e],[0,r,-e],[0,-r,e],[0,-r,-e],[r,e,0],[-r,e,0],[r,-e,0],[-r,-e,0]],facesByIndex:[[1,4,0],[4,9,0],[4,5,9],[8,5,4],[1,8,4],[1,10,8],[10,3,8],[8,3,5],[3,2,5],[3,7,2],[3,10,7],[10,6,7],[6,11,7],[6,0,11],[6,1,0],[10,1,6],[11,0,9],[2,11,9],[5,2,9],[11,2,7]]}},m=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,i=2*Math.PI/n,o=r/a,s=o*e/r,c=[];c.push([0,0,0]);for(var h=-a/2;h<=a/2;h++){for(var l=0;l<=n;l++)c.push([e*Math.sin(l*i),h*o,e*Math.cos(l*i)]);e-=s}for(var u=[],f=0;f<n;f++)u.push([0,f+1,f+2]);for(var m=1;m<c.length-n-1;m++)u.push([m,m+1,m+n+1]),u.push([m,m+n+1,m+n]);return{params:{radius:e,height:r,radialSegments:n,heightSegments:a,type:t},vertices:c,facesByIndex:u}},d=function t(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=2*Math.PI/n,s=1*r/a,c=[],h=0;h<=a;h++)for(var l=0;l<=n;l++)c.push([e*Math.sin(l*o),e*Math.cos(l*o),h*s]);for(var u=[],f=0;f<c.length-n-1;f++)u.push([f+n+1,f+1,f]),u.push([f,f+n,f+n+1]);if(i){var m=c.length-n;c.push([0,0,0]);for(var d=0;d<n;d++)u.push([d,(d+1)%n,c.length-1]);c.push([0,0,s*a]);for(var g=0;g<n;g++)u.push([c.length-1,m+(g+1)%n,m+g])}return{params:{radius:e,height:r,radialSegments:n,heightSegments:a,type:t},vertices:c,facesByIndex:u}},g=function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,a=function(t,e){for(var r=[],n=0;n<t.length;n++)r.splice(n,0,[].concat(Object(u.a)(t[n]),[-e/2])),r.push([].concat(Object(u.a)(t[n]),[e/2]));return r}(e,n),i=function(t,e){for(var r=[],n=t.length/2,a=0;a<e.length;a++)r.push(e[a]),r.push([e[a][0]+n,e[a][2]+n,e[a][1]+n]);for(var i=0;i<n;i++)r.push([i,i+n,(i+1)%n]),r.push([i+1,i+n,(i+n+1)%(2*n)]);return r}(a,r);return{params:{vertices2D:e,faces2D:r,depth:n,type:t},vertices:a,facesByIndex:i}},v=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI,i=a/r,o=[];e.forEach((function(t){for(var e=0;e<=r;e++)o.push([t[0]*Math.sin(n+e*i),t[0]*Math.cos(n+e*i),t[1]])}));for(var s=[],c=0;c<o.length-r-1;c++)s.push([c+r+1,c+1,c]),s.push([c,c+r,c+r+1]);return{params:{points:e,segments:r,phiStart:n,phiLength:a,type:t},vertices:o,facesByIndex:s}},p=function t(e){for(var r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=[],n=2*Math.PI/t;r.push([0,0,0]);for(var a=0;a<t;a++)r.push([Math.cos(a*n)*e,Math.sin(a*n)*e,0]);return r}(e),n=[],a=1;a<=e;a++)a<e?n.push([0,a,a+1]):n.push([0,a,1]);return{params:{numberOfSides:e,type:t},vertices:r,facesByIndex:n}},y=function t(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=2*Math.PI/r,a=e/r,i=e,o=[],s=0;s<=r;s++){i=Math.sqrt(Math.pow(e,2)-Math.pow(s*a,2));for(var c=0;c<=r;c++)o.push([i*Math.sin(c*n),i*Math.cos(c*n),s*a])}for(var h=0;h<=r;h++){i=Math.sqrt(Math.pow(e,2)-Math.pow(h*a,2));for(var l=0;l<=r;l++)o.push([i*Math.sin(l*n),i*Math.cos(l*n),-h*a])}for(var u=[],f=0;f<o.length-r-1;f++)f<=(o.length-r-1)/2?(u.push([f+1,f,f+r+1]),u.push([f+r+1,f,f+r])):(u.push([f,f+1,f+r+1]),u.push([f,f+r+1,f+r]));return{params:{radius:e,radialSegments:r,type:t},vertices:o,facesByIndex:u}},b=function t(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:36,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:36,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,o=[],s=0;s<=n;s++)for(var c=0;c<=a;c++){var h=c/a*i,l=s/n*Math.PI*2;o.push([(e+r*Math.cos(l))*Math.cos(h),(e+r*Math.cos(l))*Math.sin(h),r*Math.sin(l)])}for(var u=[],f=1;f<=n;f++)for(var m=1;m<=a;m++)u.push([(a+1)*f+m-1,(a+1)*(f-1)+m-1,(a+1)*f+m]),u.push([(a+1)*(f-1)+m-1,(a+1)*(f-1)+m,(a+1)*f+m]);return{params:{innerRadius:e,tubeRadius:r,radialSegments:n,tubularSegments:a,arc:i,type:t},vertices:o,facesByIndex:u}},x=function t(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:24,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:32,o=2*Math.PI/a,s=n/i,c=[],h=i*(a+1),l=0;l<i;l++)for(var u=0;u<=a;u++)c.push([r*Math.sin(u*o),r*Math.cos(u*o),l*s]);for(var f=0;f<i;f++)for(var m=0;m<=a;m++)c.push([e*Math.sin(m*o),e*Math.cos(m*o),f*s]);for(var d=[],g=0;g<h-a-1;g++)d.push([g,g+1,g+a+1]),d.push([g,g+a+1,g+a]);for(var v=h;v<c.length-a-1;v++)d.push([v,v+1,v+a+1]),d.push([v,v+a+1,v+a]);for(var p=0;p<=a;p++)c.push([e*Math.sin(p*o),e*Math.cos(p*o),0]);for(var y=0;y<=a;y++)c.push([r*Math.sin(y*o),r*Math.cos(y*o),0]);for(var b=2*h;b<2*h+a+1;b++)d.push([b,b+a,b+a+1]),d.push([b,b+1,b+a+1]);for(var x=0;x<=a;x++)c.push([e*Math.sin(x*o),e*Math.cos(x*o),n-s]);for(var M=0;M<=a;M++)c.push([r*Math.sin(M*o),r*Math.cos(M*o),n-s]);for(var j=2*h+2*a;j<2*h+3*a+3;j++)d.push([j,j+a,j+a+1]),d.push([j,j+1,j+a+1]);return{params:{innerRadius:e,outerRadius:r,height:n,radialSegments:a,heightSegments:i,type:t},vertices:c,facesByIndex:d}},M=r(13),j=function(t,e){var r=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),r},C=function(t,e,r,n){var a=t.createShader(r);return t.shaderSource(a,e),t.compileShader(a),t.getShaderParameter(a,t.COMPILE_STATUS)?a:(n&&n(a),null)},A={identityMatrix:function(){return w()},scaleMatrix:function(t,e,r){return w([[t,0,0,0],[0,e,0,0],[0,0,r,0],[0,0,0,1]])},translationMatrix:function(t,e,r){return w([[1,0,0,t],[0,1,0,e],[0,0,1,r],[0,0,0,1]])},rotationMatrix:function(t,e,r){var n=w([[1,0,0,0],[0,Math.cos(t),-Math.sin(t),0],[0,Math.sin(t),Math.cos(t),0],[0,0,0,1]]),a=w([[Math.cos(e),0,Math.sin(e),0],[0,1,0,0],[-Math.sin(e),0,Math.cos(e),0],[0,0,0,1]]),i=w([[Math.cos(r),-Math.sin(r),0,0],[Math.sin(r),Math.cos(r),0,0],[0,0,1,0],[0,0,0,1]]);return n.multiply(a.multiply(i))},orthographicProjectionMatrix:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;return w([[2/(r-n),0,0,-(r+n)/(r-n)],[0,2/(t-e),0,-(t+e)/(t-e)],[0,0,-2/(i-a),-(i+a)/(i-a)],[0,0,0,1]])},perspectiveMatrix:function(t,e,r,n,a,i){return w([[2*a/(r-n),0,(r+n)/(r-n),0],[0,2*a/(t-e),(t+e)/(t-e),0],[0,0,-(i+a)/(i-a),-2*i*a/(i-a)],[0,0,-1,0]])},rotateAboutPoint:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return A.translationMatrix.apply(A,Object(u.a)(t)).multiply(A.rotationMatrix.apply(A,Object(u.a)(e))).multiply(A.translationMatrix.apply(A,Object(u.a)(t.map((function(t){return-t})))))}},w=function t(e){var r=e||[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],n=r.length,a=r[0].length;return{elements:r,getRows:function(){return n},getColumns:function(){return a},scalarMultiply:function(e){for(var i=0;i<n;i++)for(var o=0;o<a;o++)r[i][o]*=e;return t(r)},multiply:function(e){if(!e||!Array.isArray(e.elements)||r.length<=0||e.elements.length<=0||r[0].length<=0||e.elements[0].length<=0)throw new Error("Cannot multiply matrices ");if(e.elements.length!==r[0].length)throw new Error("Matrix is incompatible for multiplication");for(var n=Array.apply(null,new Array(e.elements[0].length)).map(Number.prototype.valueOf,0),a=new Array(r.length),i=0;i<r.length;i++)a[i]=n.slice();for(var o=0;o<r.length;o++)for(var s=0;s<e.elements[0].length;s++)for(var c=0;c<r[0].length;c++)a[o][s]+=r[o][c]*e.elements[c][s];return t(a)},toArray:function(){if(n<=0||a<=0)return[];for(var t=[],e=0;e<a;e++)for(var i=0;i<n;i++)t.push(r[i][e]);return t}}},O=r(1),E=function(t){var e=Object(i.useRef)(),r=Object(i.useState)(null),n=Object(M.a)(r,2),a=n[0],o=n[1];return Object(i.useEffect)((function(){var r=e.current;if(r){var n=function(t){return t.getContext("webgl")}(r);if(n){n.enable(n.DEPTH_TEST),n.clearColor(0,0,0,0),n.viewport(0,0,r.width,r.height);var a=!1,i=function(t,e,r,n,a){var i=C(t,e,t.VERTEX_SHADER,n),o=C(t,r,t.FRAGMENT_SHADER,n);if(!i||!o)return null;var s=function(t,e,r){var n=t.createProgram();return t.attachShader(n,e),t.attachShader(n,r),t.linkProgram(n),n}(t,i,o);return t.getProgramParameter(s,t.LINK_STATUS)?s:(a&&a(s),null)}(n,"\n  #ifdef GL_ES\n  precision highp float;\n  #endif\n\n  attribute vec3 vertexPosition;\n  attribute vec3 normals;\n\n  // Note this new additional output.\n  attribute vec3 vertexColor;\n  varying vec4 finalVertexColor;\n  uniform vec3 lightDirection;\n  uniform vec3 lightColor;\n\n  // uniform vec3 lightsDirections[3];\n  // uniform vec3 lightsColor[3];\n  uniform vec3 ambientLight;\n\n  uniform mat4 matrix;\n  uniform mat4 cameraMatrix;\n  uniform mat4 projectionMatrix;\n\n  void main(void) {\n    \n    // vec4 transformedNormal = cameraMatrix * matrix * vec4(normals, 0.0);\n    // vec3 finalFakeNormal = normalize(transformedVertex.xyz);\n    // float cosineBetween = dot(lightVector, finalFakeNormal);\n    // vec3 reflection = 2.0 * cosineBetween * finalFakeNormal - lightVector;\n    // vec3 specularBaseColor = vec3(1.0, 1.0, 1.0);\n    // float shininess = 5.0;\n    // float specularContribution = pow(max(dot(reflection, transformedVertex.xyz), 0.0), shininess);\n    // if (cosineBetween < 0.0) {\n    //   specularBaseColor = vec3(0.0, 0.0, 0.0);\n    // }\n    //finalVertexColor = vec4(lightContribution * lightColor * vertexColor + specularContribution * specularBaseColor, 1.0);\n    \n\n    // Directional lights\n    // vec3 reflectedLightColor;\n    // for(int i = 0; i < 3; i++){\n    //   reflectedLightColor += max(dot(lightVector, normalize(normals)),0.0);\n    // }\n\n    vec4 transformedVertex = cameraMatrix * matrix * vec4(vertexPosition, 1.0);\n    vec4 transformedNormals = cameraMatrix * matrix * vec4(normals, 0.0);\n    vec3 lightVector = normalize(lightDirection - transformedVertex.xyz);\n    float directionalLightContribution = max(dot(lightVector, normalize(transformedNormals.xyz)), 0.0);\n    gl_Position = cameraMatrix * matrix * vec4(vertexPosition, 1.0);\n    finalVertexColor = vec4((directionalLightContribution * lightColor + ambientLight) * vertexColor, 1.0);\n  }\n",'\n  #ifdef GL_ES\n  precision highp float;\n  #endif\n\n  varying vec4 finalVertexColor;\n\n  void main(void) {\n    // We vary the color based on the fragment\'s z coordinate,\n    // which, at this point, ranges from 0 (near) to 1 (far).\n    // Note the ".rgb" subselector.\n    gl_FragColor = vec4((1.0 - gl_FragCoord.z) * finalVertexColor.rgb, 1.0);\n  }\n',(function(t){a=!0,alert("Shader problem: "+n.getShaderInfoLog(t))}),(function(t){a=!0,alert("Could not link shaders...sorry.")}));if(a)alert("Fatal errors encountered; we cannot continue.");else{n.useProgram(i);var s=n.getAttribLocation(i,"vertexPosition");n.enableVertexAttribArray(s);var c=n.getAttribLocation(i,"vertexColor");n.enableVertexAttribArray(c);var h=n.getAttribLocation(i,"normals");n.enableVertexAttribArray(h);var l=n.getUniformLocation(i,"matrix"),u=n.getUniformLocation(i,"projectionMatrix"),f=n.getUniformLocation(i,"cameraMatrix"),m=n.getUniformLocation(i,"lightDirection"),d=n.getUniformLocation(i,"lightColor"),g=n.getUniformLocation(i,"ambientLight"),v=function(t){t.change&&(t.verticesBuffer=j(n,t.vertices),t.normalsBuffer=j(n,t.normals),t.colorsBuffer=j(n,t.colors),t.change=!1),t.transform(w()),n.uniformMatrix4fv(l,n.FALSE,t.matrix.toArray()),n.bindBuffer(n.ARRAY_BUFFER,t.normalsBuffer),n.vertexAttribPointer(h,3,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,t.colorsBuffer),n.vertexAttribPointer(c,3,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,t.verticesBuffer),n.vertexAttribPointer(s,3,n.FLOAT,!1,0,0),n.drawArrays(t.mesh.isWireframe?n.LINES:n.TRIANGLES,0,t.vertices.length/3)},p=function(){n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),n.uniformMatrix4fv(u,n.FALSE,A.orthographicProjectionMatrix(-1,1,-1,1,-1,1).toArray()),n.uniformMatrix4fv(f,n.FALSE,t.scene.camera.matrix),n.uniform3fv(m,new Float32Array(t.scene.light.direction)),n.uniform3fv(d,new Float32Array(t.scene.light.color)),n.uniform3fv(g,new Float32Array(t.scene.ambientLight?t.scene.ambientLight.color:[0,0,0])),t.scene.objectsToDraw.forEach(v),n.flush()},y=null,b=function e(r){if(!y)return y=r,void window.requestAnimationFrame(e);var n=r-y;n<16.666666666666668||(null===t||void 0===t||t.tick(n),p(),y=r),window.requestAnimationFrame(e)};p(),o({startAnimation:function(){y=null,window.requestAnimationFrame(b)}})}}else alert("No WebGL context found...sorry.")}}),[e,t]),{canvasRef:e,animationWrapper:a}},F=function(t){var e=E(t.universe),r=e.canvasRef,n=e.animationWrapper;return Object(i.useEffect)((function(){n&&n.startAnimation()}),[n]),Object(O.jsx)("article",{children:Object(O.jsx)("canvas",{width:"1024",height:"512",ref:r,onClick:n&&function(e){t.universe.click()},children:"Your favorite update-your-browser message here."})})},I=r(20),P=r(8),B=r(21),S=r(22),k=function(t,e){if(t.dimensions!==e.dimensions)throw Error("Vectors have different dimensions")},_=function(){function t(){Object(B.a)(this,t),this.elements=[].slice.call(arguments)}return Object(S.a)(t,[{key:"dimensions",get:function(){return this.elements.length}},{key:"x",get:function(){return this.elements[0]}},{key:"y",get:function(){return this.elements[1]}},{key:"z",get:function(){return this.elements[2]}},{key:"w",get:function(){return this.elements[3]}},{key:"add",value:function(e){var r=new t;k(this,e);for(var n=0,a=this.dimensions;n<a;n+=1)r.elements[n]=this.elements[n]+e.elements[n];return r}},{key:"subtract",value:function(e){var r=new t;k(this,e);for(var n=0,a=this.dimensions;n<a;n+=1)r.elements[n]=this.elements[n]-e.elements[n];return r}},{key:"multiply",value:function(e){for(var r=new t,n=0,a=this.dimensions;n<a;n+=1)r.elements[n]=this.elements[n]*e;return r}},{key:"divide",value:function(e){for(var r=new t,n=0,a=this.dimensions;n<a;n+=1)r.elements[n]=this.elements[n]/e;return r}},{key:"dot",value:function(t){var e=0;k(this,t);for(var r=0,n=this.dimensions;r<n;r+=1)e+=this.elements[r]*t.elements[r];return e}},{key:"cross",value:function(e){if(3!==this.dimensions||3!==e.dimensions)throw Error("Cross product is for 3D vectors only.");return new t(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)}},{key:"magnitude",get:function(){return Math.sqrt(this.dot(this))}},{key:"unit",get:function(){return this.divide(this.magnitude)}},{key:"normalize",value:function(){return this.divide(this.magnitude)}},{key:"projection",value:function(t){k(this,t);var e=t.unit;return e.multiply(this.dot(e))}}]),t}(),T=function(t){var e=[];return t.facesByIndex.forEach((function(r){r.forEach((function(r){e.push.apply(e,Object(u.a)(t.vertices[r]))}))})),e},V=function(t){var e=[];return t.facesByIndex.forEach((function(r){for(var n=0,a=r.length;n<a;n+=1)e.push.apply(e,Object(u.a)(t.vertices[r[n]]).concat(Object(u.a)(t.vertices[r[(n+1)%a]])))})),e},R=function(t,e){t.transform(e)},U=function(){return{translate:function(t,e,r){return function(t,e,r,n){R(t,A.translationMatrix(e,r,n))}(this,t,e,r),this},rotate:function(t,e,r){return function(t,e,r,n){R(t,A.rotationMatrix(e,r,n))}(this,t,e,r),this},scale:function(t,e,r){return function(t,e,r,n){R(t,A.scaleMatrix(e,r,n))}(this,t,e,r),this},rotateAboutPoint:function(t,e){return function(t,e,r){R(t,A.rotateAboutPoint(e,r))}(this,t,e),this}}},W=function(t){var e=t.vertices,r=t.facesByIndex,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=n,o=a,s=!1,c=!1,h=!1,l=!1,f=!1,m=!1,d=!1,g=!1;return{change:!0,facesByIndex:r,facesChanged:!1,get vertices(){return s||this.updateCachedVertices(),s},set vertices(t){s=t},updateCachedVertices:function(){i?(d&&!this.facesChanged||(d=V({vertices:e,facesByIndex:r}),this.facesChanged=!1),s=d):(g&&!this.facesChanged||(g=T({vertices:e,facesByIndex:r}),this.facesChanged=!1),s=g),this.change=!0},get rawVertices(){return e},get isWireframe(){return i},set isWireframe(t){i=t,this.updateCachedVertices(),this.updateCachedNormals()},setWireframe:function(t){return i=t,this.updateCachedVertices(),this.updateCachedNormals(),this},set isFaceted(t){this.facesChanged=!0,o=t,this.updateCachedNormals()},get isFaceted(){return o},setIsFaceted:function(t){return this.facesChanged=!0,o=t,this.updateCachedNormals(),this.updateCachedVertices(),this},toggleIsFaceted:function(){return this.setIsFaceted(!o),this},get normals(){return c||this.updateCachedNormals(),c},updateCachedNormals:function(){this.isFaceted?this.isWireframe?(h||(h=this.facetedNormals),c=h):(f||(f=this.facetedNormals),c=f):this.isWireframe?(l||(l=this.smoothNormals),c=l):(m||(m=this.smoothNormals),c=m),this.change=!0},get normalsByFace(){var t=this,e=[];return r.forEach((function(r){var n=new _(t.rawVertices[r[1]][0]-t.rawVertices[r[0]][0],t.rawVertices[r[1]][1]-t.rawVertices[r[0]][1],t.rawVertices[r[1]][2]-t.rawVertices[r[0]][2]).cross(new _(t.rawVertices[r[2]][0]-t.rawVertices[r[0]][0],t.rawVertices[r[2]][1]-t.rawVertices[r[0]][1],t.rawVertices[r[2]][2]-t.rawVertices[r[0]][2]));e.push(n)})),e},get normalsByRawVertex(){var t=this,e=Array(this.rawVertices.length).fill(new _(0,0,0));return r.forEach((function(r){var n=new _(t.rawVertices[r[1]][0]-t.rawVertices[r[0]][0],t.rawVertices[r[1]][1]-t.rawVertices[r[0]][1],t.rawVertices[r[1]][2]-t.rawVertices[r[0]][2]),a=new _(t.rawVertices[r[2]][0]-t.rawVertices[r[0]][0],t.rawVertices[r[2]][1]-t.rawVertices[r[0]][1],t.rawVertices[r[2]][2]-t.rawVertices[r[0]][2]).cross(n);e[r[0]]=e[r[0]].add(a),e[r[1]]=e[r[1]].add(a),e[r[2]]=e[r[2]].add(a)})),e},get facetedNormals(){var t=[];if(this.isWireframe)for(var e=0;e<this.vertices.length;e+=18){var r=new _(this.vertices[e+6]-this.vertices[e+0],this.vertices[e+7]-this.vertices[e+1],this.vertices[e+8]-this.vertices[e+2]).cross(new _(this.vertices[e+12]-this.vertices[e+0],this.vertices[e+13]-this.vertices[e+1],this.vertices[e+14]-this.vertices[e+2]));t.push(r.x,r.y,r.z,r.x,r.y,r.z,r.x,r.y,r.z,r.x,r.y,r.z,r.x,r.y,r.z,r.x,r.y,r.z)}else for(var n=0;n<this.vertices.length;n+=9){var a=new _(this.vertices[n+6]-this.vertices[n+0],this.vertices[n+7]-this.vertices[n+1],this.vertices[n+8]-this.vertices[n+2]).cross(new _(this.vertices[n+3]-this.vertices[n+0],this.vertices[n+4]-this.vertices[n+1],this.vertices[n+5]-this.vertices[n+2]));t.push(a.x,a.y,a.z),t.push(a.x,a.y,a.z),t.push(a.x,a.y,a.z)}return t},get smoothNormals(){var t=this,e=[];return this.isWireframe?r.forEach((function(r){for(var n=0,a=r.length;n<a;n+=1)e.push.apply(e,Object(u.a)(t.normalsByRawVertex[n].elements)),e.push.apply(e,Object(u.a)(t.normalsByRawVertex[n].elements))})):r.forEach((function(r){r.forEach((function(r){e.push(t.normalsByRawVertex[r].x,t.normalsByRawVertex[r].y,t.normalsByRawVertex[r].z)}))})),e}}},L=function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"A 3D Object",i=w(),o=!0;return Object(P.a)(Object(P.a)({},U()),{},{type:t,set change(t){o=t,this.mesh.change=t},get change(){return o||this.mesh.change},name:a,mesh:e,get vertices(){return e.vertices},get matrix(){return i},get color(){return this.colors},set colors(t){n=t,r=this.calcColors()},get colors(){return r||(r=this.calcColors()),r},calcColors:function(){var t=[];if(Array.isArray(n[0])&&n.length===this.mesh.facesByIndex.length)if(this.mesh.isWireframe)for(var e=0;e<this.mesh.facesByIndex.length;e++)for(var r=0,a=this.mesh.facesByIndex[e].length;r<a;r+=1){var i,o;(i=t).push.apply(i,Object(u.a)(n[e])),(o=t).push.apply(o,Object(u.a)(n[e]))}else for(var s=0,c=this.vertices.length/9;s<c;s+=1)for(var h=0;h<3;h++)t.push(n[s][0]),t.push(n[s][1]),t.push(n[s][2]);else if(Array.isArray(n[0])&&n.length===this.mesh.rawVertices.length)this.mesh.isWireframe?this.mesh.facesByIndex.forEach((function(e){for(var r=0,a=e.length;r<a;r+=1){var i;(i=t).push.apply(i,Object(u.a)(n[e[r]]).concat(Object(u.a)(n[e[(r+1)%a]])))}})):this.mesh.facesByIndex.forEach((function(e){e.forEach((function(e){var r;(r=t).push.apply(r,Object(u.a)(n[e]))}))}));else if(Array.isArray(n[0]))for(var l=0,f=this.vertices.length/3;l<f;l+=1)t=t.concat(n[0][0],n[0][1],n[0][2]);else for(var m=0,d=this.vertices.length/3;m<d;m+=1)t=t.concat(n[0],n[1],n[2]);return this.change=!0,t},get normals(){return e.normals},setColors:function(t){return n=t,r=this.calcColors(),this},setRandomColors:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(n=[],a)for(var i=0;i<e.rawVertices.length;i++)n.push([Math.random()*t,Math.random()*t,Math.random()*t]);else for(var o=0;o<e.facesByIndex.length;o++)n.push([Math.random()*t,Math.random()*t,Math.random()*t]);return r=this.calcColors(),this},toggleIsFaceted:function(){return this.toggleFaceted()},toggleFaceted:function(){return this.mesh.toggleIsFaceted(),this},setIsFaceted:function(t){return this.mesh.setIsFaceted(t),this},get isFaceted(){return e.isFaceted},set isFaceted(t){e.isFaceted=t},set isWireframe(t){e.isWireframe=t,r=this.calcColors()},get isWireframe(){return e.isWireframe},toggleWireframe:function(){this.setWireframe(!this.isWireframe)},setWireframe:function(t){return e.setWireframe(t),r=this.calcColors(),this},transform:function(t){return i=t.multiply(i),this},transformVertices:function(t){return e.vertices=e.rawVertices.map((function(e){return t.multiply(w([[e[0]],[e[1]],[e[2]],[1]])).toArray().slice(0,-1)})),this}})},N=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"A 3D Group",n=[];e&&(n=n.concat(e));var a=w();return Object(P.a)(Object(P.a)({},U()),{},{get self(){return this},get group(){return n},get flatGroup(){return[].concat(this.group.filter((function(t){return t.type===L})).flatMap((function(t){return t}))).concat(this.group.filter((function(e){return e.type===t})).map((function(t){return t.flatGroup})).flatMap((function(t){return t})))},set group(t){n=t},name:r,set change(t){this.group.forEach((function(e){return e.change=t}))},get change(){var t,e=Object(I.a)(n);try{for(e.s();!(t=e.n()).done;){if(t.value.change)return!0}}catch(r){e.e(r)}finally{e.f()}return!1},get matrix(){return a},type:t,add:function(t){return n.push(t),this},remove:function(e){return this.group=this.group.filter((function(t){return t!==e})),this.group.filter((function(e){return e.type===t})).forEach((function(t){return t.remove(e)})),this},transform:function(t){return n.forEach((function(e){return e.transform(t)})),this},setColors:function(t){return n.forEach((function(e){return e.setColors(t)})),this},toggleWireframe:function(){n.forEach((function(t){return t.toggleWireframe()}))},setWireframe:function(t){return n.forEach((function(e){return e.setWireframe(t)})),this},setRandomColors:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return n.forEach((function(r){return r.setRandomColors(t,e)})),this},transformVertices:function(t){return n.forEach((function(e){return e.transformVertices(t)})),this},set isFaceted(t){n.forEach((function(e){return e.isFaceted=t}))},setIsFaceted:function(t){return n.forEach((function(e){return e.setIsFaceted(t)})),this},toggleFaceted:function(){return n.forEach((function(t){return t.toggleFaceted()})),this},getObjectByName:function(e){return n.find((function(t){return t.name===e}))?n.filter((function(e){return e.type===L||e.type===t})).find((function(t){return t.name===e})):n.filter((function(e){return e.type===t})).map((function(t){return t.getObjectByName(e)})).filter((function(t){return void 0!==t})).flatMap((function(t){return t}))[0]}})},D=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1];return{type:t,direction:e,color:r}},z=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[1,1,1];return{type:t,color:e,set newLight(t){void 0===t&&(t=[1,1,1]),this.color=t}}},q=function t(e,r,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:A.perspectiveMatrix,i=w().multiply(A.translationMatrix(e[0],e[1],e[2])).multiply(A.rotationMatrix(r[0],r[1],r[2])),o=a.apply(void 0,Object(u.a)(n));return Object(P.a)(Object(P.a)({},U()),{},{type:t,get matrix(){return o.multiply(i).toArray()},set matrix(t){i=t},translate:function(t,e,r){return i=i.multiply(A.translationMatrix(t,e,r)),this},rotate:function(t,e,r){return i=i.multiply(A.rotationMatrix(t,e,r)),this},projectionMatrix:o})},G=function(t,e){if(t===e||t.type===f)return A.scaleMatrix(1,1,1);if(t.geometry.type===d||t.geometry.type===m){var r=t.geometry.radius/e.geometry.radius,n=r,a=t.geometry.height/e.geometry.height;return A.scaleMatrix(r,n,a)}if(t.geometry.type===y){var i=t.geometry.radius/e.geometry.radius;return A.scaleMatrix(i,i,i)}if(t.geometry.type===x){var o=t.geometry.height/e.geometry.height;return A.scaleMatrix(1,1,o)}return A.scaleMatrix(1,1,1)},H=[],Y=function(t){if(t.geometry.type===v||t.geometry.type===g||t.geometry.type===b)return t;var e=H.find((function(e){return e.geometry.type===t.geometry.type&&e.isWireframe===t.isWireframe&&e.isFaceted===t.isFaceted&&(t.geometry.type!==p||t.geometry.numberOfSides===e.geometry.numberOfSides)&&(t.geometry.type!==d&&t.geometry.type!==m&&t.geometry.type!==y&&t.geometry.type!==x||t.geometry.radialSegments===e.geometry.radialSegments)&&(t.geometry.type!==d&&t.geometry.type!==m||t.geometry.heightSegments===e.geometry.heightSegments)&&(t.geometry.type!==x||t.geometry.innerRadius===e.geometry.innerRadius&&t.geometry.outerRadius===e.geometry.outerRadius)}));return e?(console.log("Cache hit"),e):(H.push(t),t)},J=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"A 3D Object",a=w(),i=!1,o=!0;e=t.geometry?Y(t):t;var s=Object(P.a)(Object(P.a)({},U()),{},{type:L,set change(t){o=t,this.mesh.change=t},get change(){return o||this.mesh.change},name:n,mesh:e,get vertices(){return t.vertices},get matrix(){return a},get color(){return this.colors},set colors(t){r=t,i=this.calcColors()},get colors(){return i||(i=this.calcColors()),i},calcColors:function(){var t=[];if(Array.isArray(r[0])&&r.length===this.mesh.facesByIndex.length)if(this.mesh.isWireframe)for(var e=0;e<this.mesh.facesByIndex.length;e++)for(var n=0,a=this.mesh.facesByIndex[e].length;n<a;n+=1){var i,o;(i=t).push.apply(i,Object(u.a)(r[e])),(o=t).push.apply(o,Object(u.a)(r[e]))}else for(var s=0,c=this.vertices.length/9;s<c;s+=1)for(var h=0;h<3;h++)t.push(r[s][0]),t.push(r[s][1]),t.push(r[s][2]);else if(Array.isArray(r[0])&&r.length===this.mesh.rawVertices.length)this.mesh.isWireframe?this.mesh.facesByIndex.forEach((function(e){for(var n=0,a=e.length;n<a;n+=1){var i;(i=t).push.apply(i,Object(u.a)(r[e[n]]).concat(Object(u.a)(r[e[(n+1)%a]])))}})):this.mesh.facesByIndex.forEach((function(e){e.forEach((function(e){var n;(n=t).push.apply(n,Object(u.a)(r[e]))}))}));else if(Array.isArray(r[0]))for(var l=0,f=this.vertices.length/3;l<f;l+=1)t=t.concat(r[0][0],r[0][1],r[0][2]);else for(var m=0,d=this.vertices.length/3;m<d;m+=1)t=t.concat(r[0],r[1],r[2]);return this.change=!0,t},get normals(){return t.normals},setColors:function(t){return r=t,i=this.calcColors(),this},setRandomColors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(r=[],n)for(var a=0;a<t.rawVertices.length;a++)r.push([Math.random()*e,Math.random()*e,Math.random()*e]);else for(var o=0;o<t.facesByIndex.length;o++)r.push([Math.random()*e,Math.random()*e,Math.random()*e]);return i=this.calcColors(),this},toggleIsFaceted:function(){return this.toggleFaceted()},toggleFaceted:function(){return this.mesh.toggleIsFaceted(),this},setIsFaceted:function(t){return this.mesh.setIsFaceted(t),this},get isFaceted(){return t.isFaceted},set isFaceted(e){t.isFaceted=e},set isWireframe(e){t.isWireframe=e,i=this.calcColors()},get isWireframe(){return t.isWireframe},toggleWireframe:function(){this.setWireframe(!this.isWireframe)},setWireframe:function(e){return t.setWireframe(e),i=this.calcColors(),this},transform:function(t){return a=t.multiply(a),this},transformVertices:function(e){return t.vertices=t.rawVertices.map((function(t){return e.multiply(w([[t[0]],[t[1]],[t[2]],[1]])).toArray().slice(0,-1)})),this}});return s.transform(G(t,e)),s},K=function(t){var e=N();t&&t.forEach((function(t){return e.add(t)}));var r=D([1,1,1],[1,1,1]),n=q([0,0,-5],[0,0,0],[.6,-.5,.5,-.5,1,10]),a=z([0,0,0]),i=[];return{get objectsToDraw(){return e.flatGroup},add:function(t){t.type===L||t.type===N||t.type===J?e.add(t):t.type===D?r=t:t.type===q?n=t:t.type===z&&(a=t)},remove:function(t){t.type===L||t.type===N||t.type===J?e.remove(t):t.type===q&&t===r?r=D([0,0,0],[0,0,0]):t.type===q&&t===n?n=q([0,0,0],[0,0,0],[0,0,0,0,0,0]):t.type===z&&(a=z([0,0,0]))},transform:e.transform,get light(){return r},get camera(){return n},get animation(){return i},get ambientLight(){return a},addAnimation:function(t){i.push(t)},tick:function(t){i.forEach((function(e){e.tick&&e.tick(t)}))},click:function(t){i.forEach((function(e){e.click&&e.click(t)}))}}},X=function(t){var e=Object(i.useState)({scene:K(t)}),r=Object(M.a)(e,2),n=r[0],a=r[1];return n.tick=n.scene.tick,n.click=n.scene.click,{universe:n,setUniverse:a,addToUniverse:function(t){n.scene.add(t)},removeFromUniverse:function(t){n.scene.remove(t)},addAnimation:function(t){n.scene.addAnimation(t)}}},Q=function(t,e){return{tick:function(){t.transform(e)}}},Z=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0],n=A.rotateAboutPoint(e,r);return{tick:function(){t.transform(n)}}},$=function(){var t=L(W(n.Cylinder(.5,2,8,8),!1),[1.1,1,.1],"body"),e=function(){var t=L(W(n.Sphere(1,2,8,8),!1),[0,0,0]),e=L(W(n.Sphere(1,2,8,8),!1),[10,10,10]),r=L(W(n.Sphere(1,2,8,8),!1),[.3,.8,.8]);t.transform(A.scaleMatrix(1.5,1,1)),e.transform(A.scaleMatrix(1,.7,.7)),e.transform(A.translationMatrix(-.1,0,0)),r.transform(A.scaleMatrix(.8,.5,.5)),r.transform(A.translationMatrix(-.2,0,0));var a=N([t,e,r]);return a.transform(A.rotationMatrix(0,Math.PI/2,0)),a.transform(A.scaleMatrix(.14,.07,.14)),a},r=L(W(n.Sphere(.5,5),!1),[1.1,1,.1]),a=L(W(n.Sphere(.1,5),!1),[.3,.3,0]);a.scale(1,.5,.5);var i=e(),o=e(),s=N([i,o],"eyes"),c=N([r,a,s],"head"),h=function(){var t=L(W(n.Cylinder(.2,2,8,8),!1),[1.1,1,.1]),e=L(W(n.Cylinder(.2,2,8,8),!1),[1.1,1,.1]),r=L(W(n.Cylinder(.2,2,8,8),!1),[1.1,1,.1]);return t.transform(A.translationMatrix(.35,0,0)),r.transform(A.translationMatrix(-.35,0,0)),N([t,e,r])},l=h(),u=h();l.transform(A.scaleMatrix(.3,1,.3)),u.transform(A.scaleMatrix(.3,1,.3));var f=N([l,u]),m=L(W(n.Cylinder(.2,3,8,8),!1),[1.1,1,.1]),d=L(W(n.Cylinder(.2,3,8,8),!1),[1.1,1,.1]),g=N([m,d]);g.rotate(0,Math.PI/4,0),c.rotate(0,Math.PI/4,0),t.rotate(0,Math.PI/4,0),l.rotate(0,Math.PI/4,0),u.rotate(0,Math.PI/4,0),i.rotate(0,.3,0),m.translate(-4,-2,-1),d.translate(-5,-2,-1),i.translate(.42,1.1,-.78),o.translate(.2,1.1,-.55),l.translate(-2,-2,1),u.translate(-3,-2,1),t.translate(-4.5,-1.5,-1),c.translate(-3.2,-1,.3),s.translate(-.05,-1,1.05),a.translate(.3,-.1,.3);var v=N([g,t,c,f]);return v.scale(.8,.8,.8),v.translate(-2,-.9,-1),v},tt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=L(W(n.Sphere(.5,5*t),!1),[0,0,0],"head"),r=L(W(n.Cylinder(.2,1.5,5*t,10*t),!1),[0,0,0],"neck"),a=L(W(n.Cylinder(1,3.3,5*t,10*t),!1),[0,0,0],"body"),i=W(n.Cylinder(.25,2,5*t,10*t),!1),o=L(i,[0,0,0],"legFL"),s=L(i,[0,0,0],"legFL"),c=L(i,[0,0,0],"legFL"),h=L(i,[0,0,0],"legFL"),l=N([o,s,c,h],"legs"),u=W(n.Sphere(.8,5*t),!1),f=L(u,[0,0,0],"hump"),m=L(u,[0,0,0],"hump"),d=N([f,m],"humps");l.transform(A.rotationMatrix(3*Math.PI/2,0,0)),r.transform(A.rotationMatrix(3*Math.PI/2,0,0)),a.transform(A.rotationMatrix(Math.PI/2,Math.PI/2,0)),e.transform(A.translationMatrix(-1,.2,0)),r.transform(A.translationMatrix(-1,-1.49,0)),a.transform(A.translationMatrix(-1.2,-2,0)),o.transform(A.translationMatrix(-.9,-4,.5)),s.transform(A.translationMatrix(-.9,-4,-.5)),c.transform(A.translationMatrix(1.7,-4,.5)),h.transform(A.translationMatrix(1.7,-4,-.5)),f.transform(A.translationMatrix(0,-1.3,0)),m.transform(A.translationMatrix(1.3,-1.3,0));var g=N([e,r,a,l,d].map((function(t){return t.setColors([193,154,107].map((function(t){return t/100}))),t})));return g},et=function(){var t=L(W(n.Extrude([[0,1],[.25,.3],[1,.3],[.4,-.1],[.6,-.8],[0,-.35],[-.6,-.8],[-.4,-.1],[-1,.3],[-.25,.3]],[[0,9,1],[2,1,3],[4,3,5],[6,5,7],[8,7,9],[1,9,5],[3,1,5],[7,5,9]]),!1),[0,1.5,1]);t.transform(A.scaleMatrix(.7,.7,.7)),t.transform(A.rotationMatrix(.5,.5,.5)),t.transform(A.translationMatrix(.8,.4,1.9));var e=L(W(n.Extrude([[0,1],[.25,.3],[1,.3],[.4,-.1],[.6,-.8],[0,-.35],[-.6,-.8],[-.4,-.1],[-1,.3],[-.25,.3]],[[0,9,1],[2,1,3],[4,3,5],[6,5,7],[8,7,9],[1,9,5],[3,1,5],[7,5,9]]),!1),[1,0,0]);e.transform(A.scaleMatrix(.7,.7,.7)),e.transform(A.rotationMatrix(.5,.5,.5)),e.transform(A.translationMatrix(.79,.4,1.9));var r=N();return r.add(t),r.add(e),r},rt=function(t){var e=L(W(n.Cone(2.5,3,4,4),!1),[1,1,.1]);return e.transform(A.translationMatrix.apply(A,Object(u.a)(t))),e},nt=function(){var t=function(){var t=[.63,.13,.94],e=L(W(n.Cylinder(.25,1.5,6),!1),[].concat([0,1,0]));e.translate(-1.5,0,-1.5),e.transform(A.rotationMatrix(Math.PI/2,0,0)),e.scale(.3,.3,.3);var r=L(W(n.Sphere(.25,6),!1),[].concat(t)),a=L(W(n.Sphere(.25,6),!1),[].concat(t));a.translate(-.3,0,0);var i=L(W(n.Sphere(.25,6),!1),[].concat(t));i.translate(-.6,0,0);var o=L(W(n.Sphere(.25,6),!1),[].concat(t));o.translate(-.9,0,0);var s=L(W(n.Sphere(.25,6),!1),[].concat(t));s.translate(-.15,-.3,0);var c=L(W(n.Sphere(.25,6),!1),[].concat(t));c.translate(-.45,-.3,0);var h=L(W(n.Sphere(.25,6),!1),[].concat(t));h.translate(-.75,-.3,0);var l=L(W(n.Sphere(.25,6),!1),[].concat(t));l.translate(-.3,-.6,0);var u=L(W(n.Sphere(.25,6),!1),[].concat(t));u.translate(-.6,-.6,0);var f=L(W(n.Sphere(.25,6),!1),[].concat(t));f.translate(-.45,-.9,0);var m=N([e,r,a,i,o,s,c,h,l,u,f]);return m.transform(A.scaleMatrix(.5,.5,.5)),m.scale(1,1,1),m},e=t().translate(0,.75,-1),r=t().translate(-1,-.25,-1),a=t().translate(1,-.25,-1);return{Bunch:N([e,r,a]),first_grape_position:[0,.75,-1],second_grape_position:[-1,-.25,-1],third_grape_position:[1,-.25,-1],first_grape_tracking_position:[-1.75,0,-1],second_grape_tracking_position:[-2.5,-1,-1],third_grape_tracking_position:[-1,-1,-1],first_grape_in_bunch:e,second_grape_in_bunch:r,third_grape_in_bunch:a}},at=function(){var t=X(),e=rt([-.2,-1,-3]),r=rt([-4,-1,-4]),i=rt([4,-1,-4]);t.addToUniverse(e),t.addToUniverse(r),t.addToUniverse(i),t.addAnimation({movingUp:!0,displacement:0,tick:function(t){this.isActive&&(this.movingUp?(i.translate(0,.01,0),this.displacement++,100===this.displacement&&(this.movingUp=!1)):(i.translate(0,-.01,0),this.displacement--,0===this.displacement&&(this.movingUp=!0)))},click:function(){this.isActive=!this.isActive}});var o=L(W(n.RegularPolygon(4),!1),[.5,.4,.2]);o.transform(A.scaleMatrix(15,15,1)),o.transform(A.rotationMatrix(-Math.PI/2,0,Math.PI/4)),o.transform(A.translationMatrix(0,-2.5,0)),t.addToUniverse(o);var s=L(W(n.RegularPolygon(4),!1),[2.5,5,20.5]);s.transform(A.scaleMatrix(15,15,1)),s.transform(A.rotationMatrix(0,0,Math.PI/4)),s.transform(A.translationMatrix(0,0,-3)),t.addToUniverse(s);var c=$();t.addToUniverse(c),t.addAnimation({displacement:0,movingLeft:!1,tick:function(t){this.movingLeft?(c.getObjectByName("head").getObjectByName("eyes").translate(-.001,0,0),this.displacement++,100===this.displacement&&(this.displacement=0,this.movingLeft=!1)):(c.getObjectByName("head").getObjectByName("eyes").translate(.001,0,0),this.displacement++,100===this.displacement&&(this.displacement=0,this.movingLeft=!0))}});var h=function(){var t=[3,3,3],e=L(W(n.Cylinder(.5,1,8,8),!1),t,"upper body"),r=L(W(n.Cone(.5,2,8,8),!1),t,"upper body"),a=L(W(n.Cylinder(.3,.5,8,8),!1),t,"feet"),i=N([e,r,a],"body"),o=L(W(n.Sphere(.4,6)),t,"face"),s=N([o],"head"),c=N([i,o],"mummy"),h=L(W(n.Extrude([[.5,0],[-.5,0],[-1,3],[0,4],[1,3]],[[0,1,4],[1,2,4],[4,2,3]]),!1),[.8,.5,.3]);e.rotate(Math.PI/2,0,0),r.rotate(Math.PI,0,0),s.translate(0,.4,0),r.translate(0,-2,0),a.translate(0,-5.5,-.5),h.translate(0,-3,-.5),a.scale(10,5,10);var l=N([c,h]);return l.scale(.4,.4,.4),l.rotate(-Math.PI/6,0,0),l.translate(0,-1,-2.5),l}();t.addToUniverse(h);var l=tt().scale(.25,.25,.25).transform(A.translationMatrix(1,-1.5,-1)),f=tt().scale(.25,.25,.25).translate(-1,-1.5,-1).rotateAboutPoint([-1,-1.5,-1],[0,Math.PI,0]).setWireframe(!0).setColors([0,100,0]),m=N().add(l).add(f);t.addToUniverse(m);var d=function(){var t=L(W(n.Sphere(.4,9),!1),[1,1,0]);t.transform(A.translationMatrix(1,1,1));var e=L(W(n.Cone(.5,2,12,4),!1),[1,1,1]);e.transform(A.translationMatrix(1,-.1,1));var r=L(W(n.Cylinder(.2,1.5,8,6),!1),[1,1,.1]);r.transform(A.rotationMatrix(Math.PI/2,0,0)),r.transform(A.translationMatrix(.75,-1,1));var a=L(W(n.Cylinder(.2,1.5,8,6),!1),[1,1,.1]);a.transform(A.rotationMatrix(Math.PI/2,0,0)),a.transform(A.translationMatrix(1.2,-1,1));var i=L(W(n.Lathe([[.3,0],[1,2]],8,0,2*Math.PI),!1),[1,0,0]);i.transform(A.rotationMatrix(Math.PI/2,0,0)),i.transform(A.translationMatrix(1,.5,1));var o=L(W(n.Cylinder(.2,1.5,8,6),!1),[1,1,.1]);o.transform(A.translationMatrix(.1,-.1,1.1)),o.transform(A.rotationMatrix(0,Math.PI/2,0));var s=N([],"staff???"),c=L(W(n.Cylinder(.1,3.5,8,6),!1),[1.21,.63,.13],"staffBase");c.transform(A.rotationMatrix(Math.PI/2,0,0)),c.transform(A.translationMatrix(2.2,.8,0));var h=L(W(n.Cylinder(.1,1,8,6),!1),[1.21,.63,.13]);h.transform(A.rotationMatrix(Math.PI/2,Math.PI/4,0)),h.transform(A.translationMatrix(2.5,1,0));var l=L(W(n.Cylinder(.1,.5,8,6),!1),[1.21,.63,.13]);l.transform(A.rotationMatrix(Math.PI/2,3*Math.PI/4,0)),l.transform(A.translationMatrix(2.255,.65,0)),s.add(c),s.add(h),s.add(l);var u=N();return u.add(t),u.add(e),u.add(r),u.add(a),u.add(i),u.add(o),u.add(s),u.transform(A.scaleMatrix(.2,.2,.2)),u.transform(A.translationMatrix(-.5,-1.9,0)),u}();t.addToUniverse(d);for(var g=N(),v=0;v<8;v++)g.add(et().scale(.25,.25,.25).translate(6*Math.random()-3,2*Math.random()-1,2*Math.random()-1));t.addToUniverse(g);var p=function(){var t=function(){var t=L(W(n.Sphere(1.2,8)),[.5,.5,.5]);t.scale(1,.25,1);var e=L(W(n.Sphere(.5,8),!0),[.5,.7,1]);e.rotate(0,Math.PI/2,0).scale(1,.9,1).translate(0,.35,0);var r=L(W(n.RegularPolygon(16)),[0,0,.05]);return r.rotate(Math.PI/2,0,0).scale(.5,.5,.5).translate(0,.25,0),N([t,e,r])}(),e=function(){var t=L(W(n.Sphere(.1,8)),[0,.8,.6]);t.scale(1,1.2,1).translate(0,.25,0);var e=L(W(n.Sphere(.15,8)),[0,.8,.6]);e.scale(1,1.5,1);var r=L(W(n.Cylinder(.04,.3,6)),[0,.8,.6],"left");r.translate(.11,.17,0);var a=L(W(n.Cylinder(.04,.3,6)),[0,.8,.6],"right");a.translate(-.11,.17,0);var i=N([r,a],"arms").rotate(.5,0,0),o=L(W(n.Sphere(.06,6)),[0,0,0],"left");o.translate(.015,.26,.04);var s=L(W(n.Sphere(.06,6)),[0,0,0],"right");s.translate(-.015,.26,.04);var c=N([o,s],"eyes");return N([t,e,i,c])}();e.translate(0,.25,0);var r=function(){var t=L(W(n.Cone(.5,2,6),!0),[0,.8,.8],"outer"),e=L(W(n.Cone(.4,2,6),!0),[.8,0,.8],"inner");return N([t,e],"beam")}();return r.translate(0,-.5,0),N([t,e,r])}().translate(3,0,-1);t.addToUniverse(p),t.addAnimation(a.RotateAboutPoint(p.getObjectByName("beam").getObjectByName("outer"),[3,0,-1],[0,.01,0])),t.addAnimation(a.RotateAboutPoint(p.getObjectByName("beam").getObjectByName("inner"),[3,0,-1],[0,-.01,0])),t.addAnimation(a.RotateAboutPoint(p,[3,0,-1],[0,-.001,0])),t.addAnimation({displacement:0,movingUp:!1,tick:function(t){this.movingUp?(p.translate(0,.001,0),this.displacement++,100===this.displacement&&(this.displacement=0,this.movingUp=!1)):(p.translate(0,-.001,0),this.displacement++,100===this.displacement&&(this.displacement=0,this.movingUp=!0))}});var y=nt();t.addToUniverse(y.Bunch);var b=q([0,1,-5],[0,0,0],[.5,-.5,1,-1,1,10]);t.addToUniverse(b);var x=D([-2,0,10],[5,5,5]);t.addToUniverse(x);var M=z([3,3,3]);t.addToUniverse(M);var j={curseUnleahsed:!1,brighten:!1,displacement:0,toggleCurse:function(){this.curseUnleahsed=!this.curseUnleahsed},tick:function(){this.curseUnleahsed&&(this.displacement<100?(c.translate(.05,.008,.05),c.rotate(0,-.006,0),this.displacement++):this.displacement<150?(this.brighten?M.newLight=[10,10,10]:M.newLight=[.1,.1,.1],this.brighten=!this.brighten,this.displacement++):this.displacement<151?(t.removeFromUniverse(c),this.displacement++):this.displacement<200?(this.brighten?M.newLight=[10,10,10]:M.newLight=[.1,.1,.1],this.brighten=!this.brighten,e.toggleWireframe(),this.displacement++):this.displacement<350?(this.brighten?M.newLight=[10,10,10]:M.newLight=[.1,.1,.1],this.brighten=!this.brighten,e.toggleWireframe(),h.getObjectByName("mummy").rotate(.001,0,0),this.displacement++):this.displacement<351&&(M.newLight=[3,3,3],e.toggleWireframe(),c=$(),t.addToUniverse(c),c.getObjectByName("eyes").translate(.2,0,.1),this.displacement++))}};t.addAnimation(j);var C={timeElapsed:3e3,toggleEarthquake:function(){this.timeElapsed=0},tick:function(e){this.timeElapsed<3e3&&(this.timeElapsed=this.timeElapsed+e,t.universe.scene.objectsToDraw.forEach((function(t){return t.translate(.01*Math.random()-.005,.01*Math.random()-.005,.01*Math.random()-.005)})))}};t.addAnimation(C);var w={dancing:!1,rave:!1,ferrisWheel:!1,toggleDancing:function(){this.dancing=!this.dancing},toggleRave:function(){this.rave=!this.rave},toggleferrisWheel:function(){this.ferrisWheel=!this.ferrisWheel},tick:function(){if(this.dancing&&(y.first_grape_in_bunch.rotateAboutPoint(Object(u.a)(y.first_grape_tracking_position),[0,-.05,0]),y.second_grape_in_bunch.rotateAboutPoint(Object(u.a)(y.second_grape_tracking_position),[0,-.05,0]),y.third_grape_in_bunch.rotateAboutPoint(Object(u.a)(y.third_grape_tracking_position),[0,-.05,0])),this.rave&&(y.first_grape_in_bunch.rotateAboutPoint(Object(u.a)(y.first_grape_position),[.025*Math.random(),.25*Math.random(),.025*Math.random()]),y.second_grape_in_bunch.rotateAboutPoint(Object(u.a)(y.second_grape_position),[-.25*Math.random(),.025*Math.random(),-.025*Math.random()]),y.third_grape_in_bunch.rotateAboutPoint(Object(u.a)(y.third_grape_position),[.25*Math.random(),-.25*Math.random(),.025*Math.random()])),this.ferrisWheel){var t=[.5*Math.random(),.5*Math.random(),-1*Math.random()],e=[0,0,.5*Math.random()];y.Bunch.group.forEach((function(r){return r.rotateAboutPoint([].concat(t),[].concat(e))}))}}};t.addAnimation(w);var O={center:[-.2,-2,1],angle:Math.PI/2,toggleFlying:function(){this.flying=!this.flying},toggleLeft:function(){this.flying=!0,this.rightTurn=!1,this.leftTurn=!this.leftTurn},toggleRight:function(){this.flying=!0,this.rightTurn=!this.rightTurn,this.leftTurn=!1},tick:function(t){this.flying&&(d.translate(.02*Math.cos(this.angle),.02*Math.sin(this.angle),0),this.center[0]+=.02*Math.cos(this.angle),this.center[1]+=.02*Math.sin(this.angle)),this.leftTurn&&(this.angle-=.075,d.rotateAboutPoint([this.center[0],this.center[1],this.center[2]],[0,0,-.075])),this.rightTurn&&(d.rotateAboutPoint([this.center[0],this.center[1],this.center[2]],[0,0,.075]),this.angle+=.075)}};t.addAnimation(O);var E={camelHeadBob:!1,timeElapsed:0,objectsToAffect:[l.getObjectByName("head"),l.getObjectByName("neck")],tick:function(t){this.camelHeadBob&&(this.timeElapsed=this.timeElapsed>1e3?this.timeElapsed=0:this.timeElapsed+t,this.timeElapsed<500?this.objectsToAffect.forEach((function(t){t.rotateAboutPoint([1,-1.5,-1],[0,0,.01])})):this.objectsToAffect.forEach((function(t){t.rotateAboutPoint([1,-1.5,-1],[0,0,-.01])})))},toggleAnimation:function(){this.camelHeadBob=!this.camelHeadBob}};t.addAnimation(E);var F={moving:!1,toggleMoving:function(){this.moving=!this.moving},tick:function(){this.moving&&b.rotate(0,.01,.001)}};t.addAnimation(F),t.addAnimation({timeElapsed:0,camelInScene:!0,timeBetween:3e3,tick:function(e){this.timeElapsed=this.timeElapsed>this.timeBetween?this.timeElapsed=0:this.timeElapsed+e,this.timeElapsed>this.timeBetween&&(this.timeElapsed=0,this.camelInScene?(t.removeFromUniverse(f),this.camelInScene=!1):(t.addToUniverse(f),this.camelInScene=!0))}});var I={isPerspective:!0,toggleView:function(){if(this.isPerspective){var e=q([0,1,-5],[0,0,0],[2.5,-2.5,5,-5,-5,10],A.orthographicProjectionMatrix);t.addToUniverse(e),this.isPerspective=!this.isPerspective}else{var r=q([0,1,-5],[0,0,0],[.5,-.5,1,-1,1,10]);t.addToUniverse(r),this.isPerspective=!this.isPerspective}}};t.addAnimation({timeElapsed:0,timeBetween:3e3,tick:function(t){this.timeElapsed>this.timeBetween?(this.timeElapsed=0,e.toggleFaceted()):this.timeElapsed+=t}});var P={change:!1,tick:function(){this.change&&(this.change=!1,t.universe.scene.objectsToDraw.forEach((function(t){return t.toggleFaceted()})))},sceneToggleFaceted:function(){this.change=!0}};t.addAnimation(P);var B={addAnimation:t.addAnimation,toggleUnleshCurse:function(){j.toggleCurse()},toggleCamelAnimation:function(){E.toggleAnimation()},toggleDancing:function(){w.toggleDancing()},toggleRave:function(){w.toggleRave()},toggleferrisWheel:function(){w.toggleferrisWheel()},toggleEarthquake:function(){C.toggleEarthquake()},toggleFlying:function(){O.toggleFlying()},toggleRight:function(){O.toggleLeft()},toggleLeft:function(){O.toggleRight()},makeWireframe:function(){t.universe.scene.objectsToDraw.forEach((function(t){return t.toggleWireframe()}))},toggleMoveCamera:function(){F.toggleMoving()},changeCamera:function(){I.toggleView()},sceneToggleFaceted:function(){P.sceneToggleFaceted()}};return{universe:t,thingsWeWant:B}},it=function(t){var e=at(),r=e.universe,n=e.thingsWeWant;return Object(O.jsxs)("article",{children:[Object(O.jsx)(F,{universe:r.universe}),Object(O.jsxs)("section",{children:[Object(O.jsx)("button",{onClick:n.makeWireframe,children:"Toggle wireframe"}),Object(O.jsx)("button",{onClick:n.sceneToggleFaceted,children:"Toggle Faceted/Smooth"}),Object(O.jsx)("button",{onClick:n.toggleMoveCamera,children:"Toggle camera move"}),Object(O.jsx)("button",{onClick:n.changeCamera,children:"Toggle camera"}),Object(O.jsx)("button",{onClick:n.toggleEarthquake,children:"You make my earth quake"}),Object(O.jsx)("button",{onClick:n.toggleUnleshCurse,children:"Unleash Ancient Curse"}),Object(O.jsx)("button",{onClick:n.toggleCamelAnimation,children:"Straight vibing"}),Object(O.jsx)("br",{}),Object(O.jsx)("button",{onClick:n.toggleDancing,children:" Dancing \ud83d\udc83\ud83c\udffb \ud83d\udd7a\ud83c\udffb \ud83c\udf47 "}),Object(O.jsx)("button",{onClick:n.toggleRave,children:" Rave \ud83c\udf47 \u2753 \u2754"}),Object(O.jsx)("button",{onClick:n.toggleferrisWheel,children:" \ud83c\udfa1 \ud83c\udf47 Ferris Wheel \ud83c\udf47 \ud83c\udfa1"}),Object(O.jsx)("br",{}),Object(O.jsx)("button",{onClick:n.toggleLeft,children:"\u23ea"}),Object(O.jsx)("button",{onClick:n.toggleFlying,children:"Fly!"}),Object(O.jsx)("button",{onClick:n.toggleRight,children:"\u23e9"})]})]})},ot=function(){var t=X(),e=L(W(d(.2,1.5,8,32),!1),[1,1,.1]);t.addToUniverse(e);var r=function(){var t=L(W(n.Sphere(.3,5),!1),[0,0,0]);t.setRandomColors(10),t.transform(A.scaleMatrix(2,2,2)),t.transform(A.rotationMatrix(0,0,.5)),t.transform(A.translationMatrix(3,-.2,.5));var e=L(W(n.Cone(.5,1,8,8),!1),[.7,0,.8]);e.setRandomColors(5,!1),e.transform(A.rotationMatrix(0,-.3,3.14)),e.transform(A.translationMatrix(3,-1,.5));var r=N();return r.add(e),r.add(t),r}();t.addToUniverse(r),t.addAnimation(a.RotateAboutPoint(r,[3,-1,.5],[0,0,.1]));var i=nt().Bunch.translate(.5,-1,-.2);t.addToUniverse(i);var o=tt().scale(.5,.5,.5).translate(-2.5,0,0);t.addToUniverse(o);var s=L(W(d())).translate(-1,-1,-1);t.addToUniverse(s);var c=q([0,1,-5],[0,0,0],[.5,-.5,1,-1,1,10]);t.addToUniverse(c);var h=z([1,1,1]);return t.addToUniverse(h),t},st=function(t){var e=ot().universe;return Object(O.jsx)(F,{universe:e})},ct=function(){return Object(O.jsxs)("article",{children:[Object(O.jsx)("h1",{children:"Choose which to look at above"}),Object(O.jsx)("p",{children:"`Our Scene` contains a fun Egyptian scene. `Our Sandbox` has a bunch of random objects"})]})},ht=function(){return Object(O.jsx)("article",{className:"App",children:Object(O.jsxs)(h.a,{children:[Object(O.jsxs)("nav",{children:[Object(O.jsx)(h.b,{activeClassName:"current",to:"/our-webgl",children:"Our Scene"}),Object(O.jsx)(h.b,{activeClassName:"current",to:"/our-sandbox",children:"Our Sandbox"})]}),Object(O.jsx)("main",{children:Object(O.jsxs)(l.c,{children:[Object(O.jsx)(l.a,{path:"/our-webgl",component:it}),Object(O.jsx)(l.a,{path:"/our-sandbox",component:st}),Object(O.jsx)(l.a,{component:ct})]})})]})})},lt=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,40)).then((function(e){var r=e.getCLS,n=e.getFID,a=e.getFCP,i=e.getLCP,o=e.getTTFB;r(t),n(t),a(t),i(t),o(t)}))};c.a.render(Object(O.jsx)(o.a.StrictMode,{children:Object(O.jsx)(ht,{})}),document.getElementById("root")),lt()}},[[39,1,2]]]);
//# sourceMappingURL=main.71147a43.chunk.js.map